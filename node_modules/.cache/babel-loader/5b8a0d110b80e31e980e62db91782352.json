{"ast":null,"code":"var _jsxFileName = \"C:\\\\react\\\\fastCompany\\\\src\\\\app\\\\components\\\\users.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { paginate } from \"../utils/paginate\";\nimport Pagination from \"./pagination\";\nimport api from \"../api\";\nimport GroupList from \"./groupList\";\nimport SearchStatus from \"./searchStatus\";\nimport UserTable from \"./usersTable\";\nimport _ from \"lodash\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Users = ({\n  users: allUsers,\n  ...rest\n}) => {\n  _s();\n\n  const [currentPage, setCurrentPage] = useState(1);\n  const [professions, setProfession] = useState();\n  const [selectedProf, setSelectedProf] = useState();\n  const [sortBy, setSortBy] = useState({\n    iter: \"name\",\n    order: \"asc\"\n  });\n  const pageSize = 8;\n  useEffect(() => {\n    api.professions.fetchAll().then(data => setProfession(data));\n  }, []);\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [selectedProf]);\n\n  const handleProfessionSelect = item => {\n    setSelectedProf(item);\n  };\n\n  const handlePageChange = pageIndex => {\n    setCurrentPage(pageIndex);\n  };\n\n  const handleSort = item => {\n    if (sortBy.iter === item) {\n      setSortBy(prevState => ({ ...prevState,\n        order: prevState.order === \"asc\" ? \"desc\" : \"asc\"\n      }));\n    } else {\n      setSortBy({\n        iter: item,\n        order: \"asc\"\n      });\n    }\n  };\n\n  const filteredUsers = selectedProf ? allUsers.filter(user => JSON.stringify(user.profession) === JSON.stringify(selectedProf)) : allUsers;\n  const count = filteredUsers.length;\n\n  const sortedUsers = _.orderBy(filteredUsers, [sortBy.iter], [sortBy.order]);\n\n  const usersCrop = paginate(sortedUsers, currentPage, pageSize);\n\n  const clearFilter = () => {\n    setSelectedProf();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex\",\n    children: [professions && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex flex-column flex-shrink-0 p-3\",\n      children: [/*#__PURE__*/_jsxDEV(GroupList, {\n        selectedItem: selectedProf,\n        items: professions,\n        onItemSelect: handleProfessionSelect\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-secondary mt-2\",\n        onClick: clearFilter,\n        children: [\" \", \"\\u041E\\u0447\\u0438\\u0441\\u0442\\u0438\\u0442\\u0442\\u044C\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex flex-column\",\n      children: [/*#__PURE__*/_jsxDEV(SearchStatus, {\n        length: count\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), count > 0 && /*#__PURE__*/_jsxDEV(UserTable, {\n        users: usersCrop,\n        onSort: handleSort,\n        ...rest\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(Pagination, {\n          itemsCount: count,\n          pageSize: pageSize,\n          currentPage: currentPage,\n          onPageChange: handlePageChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Users, \"okAZCMPGvAQ5AhccGlF2whx+wlg=\");\n\n_c = Users;\nUsers.propTypes = {\n  users: PropTypes.array\n};\nexport default Users;\n\nvar _c;\n\n$RefreshReg$(_c, \"Users\");","map":{"version":3,"sources":["C:/react/fastCompany/src/app/components/users.jsx"],"names":["React","useState","useEffect","PropTypes","paginate","Pagination","api","GroupList","SearchStatus","UserTable","_","Users","users","allUsers","rest","currentPage","setCurrentPage","professions","setProfession","selectedProf","setSelectedProf","sortBy","setSortBy","iter","order","pageSize","fetchAll","then","data","handleProfessionSelect","item","handlePageChange","pageIndex","handleSort","prevState","filteredUsers","filter","user","JSON","stringify","profession","count","length","sortedUsers","orderBy","usersCrop","clearFilter","propTypes","array"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,QAAT,QAAyB,mBAAzB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,GAAP,MAAgB,QAAhB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,SAAP,MAAsB,cAAtB;AACA,OAAOC,CAAP,MAAc,QAAd;;;AACA,MAAMC,KAAK,GAAG,CAAC;AAAEC,EAAAA,KAAK,EAAEC,QAAT;AAAmB,KAAGC;AAAtB,CAAD,KAAkC;AAAA;;AAC5C,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCf,QAAQ,CAAC,CAAD,CAA9C;AACA,QAAM,CAACgB,WAAD,EAAcC,aAAd,IAA+BjB,QAAQ,EAA7C;AACA,QAAM,CAACkB,YAAD,EAAeC,eAAf,IAAkCnB,QAAQ,EAAhD;AACA,QAAM,CAACoB,MAAD,EAASC,SAAT,IAAsBrB,QAAQ,CAAC;AAAEsB,IAAAA,IAAI,EAAE,MAAR;AAAgBC,IAAAA,KAAK,EAAE;AAAvB,GAAD,CAApC;AAEA,QAAMC,QAAQ,GAAG,CAAjB;AACAvB,EAAAA,SAAS,CAAC,MAAM;AACZI,IAAAA,GAAG,CAACW,WAAJ,CAAgBS,QAAhB,GAA2BC,IAA3B,CAAiCC,IAAD,IAAUV,aAAa,CAACU,IAAD,CAAvD;AACH,GAFQ,EAEN,EAFM,CAAT;AAGA1B,EAAAA,SAAS,CAAC,MAAM;AACZc,IAAAA,cAAc,CAAC,CAAD,CAAd;AACH,GAFQ,EAEN,CAACG,YAAD,CAFM,CAAT;;AAIA,QAAMU,sBAAsB,GAAIC,IAAD,IAAU;AACrCV,IAAAA,eAAe,CAACU,IAAD,CAAf;AACH,GAFD;;AAIA,QAAMC,gBAAgB,GAAIC,SAAD,IAAe;AACpChB,IAAAA,cAAc,CAACgB,SAAD,CAAd;AACH,GAFD;;AAGA,QAAMC,UAAU,GAAIH,IAAD,IAAU;AACzB,QAAIT,MAAM,CAACE,IAAP,KAAgBO,IAApB,EAA0B;AACtBR,MAAAA,SAAS,CAAEY,SAAD,KAAgB,EACtB,GAAGA,SADmB;AAEtBV,QAAAA,KAAK,EAAEU,SAAS,CAACV,KAAV,KAAoB,KAApB,GAA4B,MAA5B,GAAqC;AAFtB,OAAhB,CAAD,CAAT;AAIH,KALD,MAKO;AACHF,MAAAA,SAAS,CAAC;AAAEC,QAAAA,IAAI,EAAEO,IAAR;AAAcN,QAAAA,KAAK,EAAE;AAArB,OAAD,CAAT;AACH;AACJ,GATD;;AAUA,QAAMW,aAAa,GAAGhB,YAAY,GAC5BN,QAAQ,CAACuB,MAAT,CACKC,IAAD,IACIC,IAAI,CAACC,SAAL,CAAeF,IAAI,CAACG,UAApB,MACAF,IAAI,CAACC,SAAL,CAAepB,YAAf,CAHR,CAD4B,GAM5BN,QANN;AAQA,QAAM4B,KAAK,GAAGN,aAAa,CAACO,MAA5B;;AACA,QAAMC,WAAW,GAAGjC,CAAC,CAACkC,OAAF,CAAUT,aAAV,EAAyB,CAACd,MAAM,CAACE,IAAR,CAAzB,EAAwC,CAACF,MAAM,CAACG,KAAR,CAAxC,CAApB;;AACA,QAAMqB,SAAS,GAAGzC,QAAQ,CAACuC,WAAD,EAAc5B,WAAd,EAA2BU,QAA3B,CAA1B;;AACA,QAAMqB,WAAW,GAAG,MAAM;AACtB1B,IAAAA,eAAe;AAClB,GAFD;;AAIA,sBACI;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA,eACKH,WAAW,iBACR;AAAK,MAAA,SAAS,EAAC,sCAAf;AAAA,8BACI,QAAC,SAAD;AACI,QAAA,YAAY,EAAEE,YADlB;AAEI,QAAA,KAAK,EAAEF,WAFX;AAGI,QAAA,YAAY,EAAEY;AAHlB;AAAA;AAAA;AAAA;AAAA,cADJ,eAMI;AACI,QAAA,SAAS,EAAC,wBADd;AAEI,QAAA,OAAO,EAAEiB,WAFb;AAAA,mBAIK,GAJL;AAAA;AAAA;AAAA;AAAA;AAAA,cANJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAFR,eAiBI;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA,8BACI,QAAC,YAAD;AAAc,QAAA,MAAM,EAAEL;AAAtB;AAAA;AAAA;AAAA;AAAA,cADJ,EAEKA,KAAK,GAAG,CAAR,iBACG,QAAC,SAAD;AACI,QAAA,KAAK,EAAEI,SADX;AAEI,QAAA,MAAM,EAAEZ,UAFZ;AAAA,WAGQnB;AAHR;AAAA;AAAA;AAAA;AAAA,cAHR,eASI;AAAK,QAAA,SAAS,EAAC,+BAAf;AAAA,+BACI,QAAC,UAAD;AACI,UAAA,UAAU,EAAE2B,KADhB;AAEI,UAAA,QAAQ,EAAEhB,QAFd;AAGI,UAAA,WAAW,EAAEV,WAHjB;AAII,UAAA,YAAY,EAAEgB;AAJlB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cATJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAjBJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAsCH,CApFD;;GAAMpB,K;;KAAAA,K;AAqFNA,KAAK,CAACoC,SAAN,GAAkB;AACdnC,EAAAA,KAAK,EAAET,SAAS,CAAC6C;AADH,CAAlB;AAIA,eAAerC,KAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { paginate } from \"../utils/paginate\";\nimport Pagination from \"./pagination\";\nimport api from \"../api\";\nimport GroupList from \"./groupList\";\nimport SearchStatus from \"./searchStatus\";\nimport UserTable from \"./usersTable\";\nimport _ from \"lodash\";\nconst Users = ({ users: allUsers, ...rest }) => {\n    const [currentPage, setCurrentPage] = useState(1);\n    const [professions, setProfession] = useState();\n    const [selectedProf, setSelectedProf] = useState();\n    const [sortBy, setSortBy] = useState({ iter: \"name\", order: \"asc\" });\n\n    const pageSize = 8;\n    useEffect(() => {\n        api.professions.fetchAll().then((data) => setProfession(data));\n    }, []);\n    useEffect(() => {\n        setCurrentPage(1);\n    }, [selectedProf]);\n\n    const handleProfessionSelect = (item) => {\n        setSelectedProf(item);\n    };\n\n    const handlePageChange = (pageIndex) => {\n        setCurrentPage(pageIndex);\n    };\n    const handleSort = (item) => {\n        if (sortBy.iter === item) {\n            setSortBy((prevState) => ({\n                ...prevState,\n                order: prevState.order === \"asc\" ? \"desc\" : \"asc\"\n            }));\n        } else {\n            setSortBy({ iter: item, order: \"asc\" });\n        }\n    };\n    const filteredUsers = selectedProf\n        ? allUsers.filter(\n              (user) =>\n                  JSON.stringify(user.profession) ===\n                  JSON.stringify(selectedProf)\n          )\n        : allUsers;\n\n    const count = filteredUsers.length;\n    const sortedUsers = _.orderBy(filteredUsers, [sortBy.iter], [sortBy.order]);\n    const usersCrop = paginate(sortedUsers, currentPage, pageSize);\n    const clearFilter = () => {\n        setSelectedProf();\n    };\n\n    return (\n        <div className=\"d-flex\">\n            {professions && (\n                <div className=\"d-flex flex-column flex-shrink-0 p-3\">\n                    <GroupList\n                        selectedItem={selectedProf}\n                        items={professions}\n                        onItemSelect={handleProfessionSelect}\n                    />\n                    <button\n                        className=\"btn btn-secondary mt-2\"\n                        onClick={clearFilter}\n                    >\n                        {\" \"}\n                        Очиститть\n                    </button>\n                </div>\n            )}\n            <div className=\"d-flex flex-column\">\n                <SearchStatus length={count} />\n                {count > 0 && (\n                    <UserTable\n                        users={usersCrop}\n                        onSort={handleSort}\n                        {...rest}\n                    />\n                )}\n                <div className=\"d-flex justify-content-center\">\n                    <Pagination\n                        itemsCount={count}\n                        pageSize={pageSize}\n                        currentPage={currentPage}\n                        onPageChange={handlePageChange}\n                    />\n                </div>\n            </div>\n        </div>\n    );\n};\nUsers.propTypes = {\n    users: PropTypes.array\n};\n\nexport default Users;\n"]},"metadata":{},"sourceType":"module"}