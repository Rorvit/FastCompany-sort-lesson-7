{"ast":null,"code":"var _jsxFileName = \"C:\\\\react\\\\fastCompany\\\\src\\\\app\\\\layouts\\\\users.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { paginate } from \"../utils/paginate\";\nimport Pagination from \"../components/pagination\";\nimport GroupList from \"../components/groupList\";\nimport api from \"../api\";\nimport SearchStatus from \"../components/searchStatus\";\nimport UsersTable from \"../components/usersTable\";\nimport _ from \"lodash\";\nimport { useParams } from \"react-router-dom\";\nimport UserPage from \"../components/userPage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Users = () => {\n  _s();\n\n  const [currentPage, setCurrentPage] = useState(1);\n  const [professions, setProfessions] = useState();\n  const [selectedProf, setSelectedProf] = useState();\n  const [sortBy, setSortBy] = useState({\n    iter: \"name\",\n    order: \"asc\"\n  });\n  const params = useParams();\n  const pageSize = 8;\n  const [users, setUsers] = useState(api.users.fetchAll());\n  useEffect(() => {\n    api.users.fetchAll().then(data => setUsers(data));\n  }, []);\n\n  const handleDelete = userId => {\n    setUsers(users.filter(user => user._id !== userId));\n  };\n\n  const handleToggleBookMark = id => {\n    setUsers(users.map(user => {\n      if (user._id === id) {\n        return { ...user,\n          bookmark: !user.bookmark\n        };\n      }\n\n      return user;\n    }));\n  };\n\n  useEffect(() => {\n    api.professions.fetchAll().then(data => setProfessions(data));\n  }, []);\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [selectedProf]);\n\n  const handleProfessionSelect = item => {\n    setSelectedProf(item);\n  };\n\n  const handlePageChange = pageIndex => {\n    setCurrentPage(pageIndex);\n  };\n\n  const handleSort = item => {\n    setSortBy(item);\n  };\n\n  const {\n    userId\n  } = params;\n\n  if (!userId && users) {\n    const filteredUsers = selectedProf ? users.filter(user => JSON.stringify(user.profession) === JSON.stringify(selectedProf)) : users;\n    const count = filteredUsers.length;\n\n    const sortedUsers = _.orderBy(filteredUsers, [sortBy.path], [sortBy.order]);\n\n    const usersCrop = paginate(sortedUsers, currentPage, pageSize);\n\n    const clearFilter = () => {\n      setSelectedProf();\n    };\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex\",\n      children: [professions && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-column flex-shrink-0 p-3\",\n        children: [/*#__PURE__*/_jsxDEV(GroupList, {\n          items: professions,\n          selectedItem: selectedProf,\n          onItemSelect: handleProfessionSelect\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary mt-2\",\n          onClick: clearFilter,\n          children: \"\\u041E\\u0447\\u0438\\u0441\\u0442\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-column\",\n        children: [/*#__PURE__*/_jsxDEV(SearchStatus, {\n          length: count\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this), count > 0 && /*#__PURE__*/_jsxDEV(UsersTable, {\n          users: usersCrop,\n          onSort: handleSort,\n          selectedSort: sortBy,\n          onDelete: handleDelete,\n          onToggleBookMark: handleToggleBookMark\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-center\",\n          children: /*#__PURE__*/_jsxDEV(Pagination, {\n            itemsCount: count,\n            pageSize: pageSize,\n            currentPage: currentPage,\n            onPageChange: handlePageChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this);\n  } else if (userId) {\n    return /*#__PURE__*/_jsxDEV(UserPage, {\n      userId: userId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 16\n    }, this);\n  }\n\n  return \"Загрузка...\";\n};\n\n_s(Users, \"YVUemnmsk+KTGQwTxd2bDsUmBxU=\", false, function () {\n  return [useParams];\n});\n\n_c = Users;\nUsers.propTypes = {\n  users: PropTypes.oneOfType([PropTypes.object, PropTypes.array])\n};\nexport default Users;\n\nvar _c;\n\n$RefreshReg$(_c, \"Users\");","map":{"version":3,"sources":["C:/react/fastCompany/src/app/layouts/users.jsx"],"names":["React","useState","useEffect","PropTypes","paginate","Pagination","GroupList","api","SearchStatus","UsersTable","_","useParams","UserPage","Users","currentPage","setCurrentPage","professions","setProfessions","selectedProf","setSelectedProf","sortBy","setSortBy","iter","order","params","pageSize","users","setUsers","fetchAll","then","data","handleDelete","userId","filter","user","_id","handleToggleBookMark","id","map","bookmark","handleProfessionSelect","item","handlePageChange","pageIndex","handleSort","filteredUsers","JSON","stringify","profession","count","length","sortedUsers","orderBy","path","usersCrop","clearFilter","propTypes","oneOfType","object","array"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { paginate } from \"../utils/paginate\";\r\nimport Pagination from \"../components/pagination\";\r\nimport GroupList from \"../components/groupList\";\r\nimport api from \"../api\";\r\nimport SearchStatus from \"../components/searchStatus\";\r\nimport UsersTable from \"../components/usersTable\";\r\nimport _ from \"lodash\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport UserPage from \"../components/userPage\";\r\n\r\nconst Users = () => {\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [professions, setProfessions] = useState();\r\n    const [selectedProf, setSelectedProf] = useState();\r\n    const [sortBy, setSortBy] = useState({ iter: \"name\", order: \"asc\" });\r\n    const params = useParams();\r\n    const pageSize = 8;\r\n\r\n    const [users, setUsers] = useState(api.users.fetchAll());\r\n    useEffect(() => {\r\n        api.users.fetchAll().then((data) => setUsers(data));\r\n    }, []);\r\n    const handleDelete = (userId) => {\r\n        setUsers(users.filter((user) => user._id !== userId));\r\n    };\r\n    const handleToggleBookMark = (id) => {\r\n        setUsers(\r\n            users.map((user) => {\r\n                if (user._id === id) {\r\n                    return { ...user, bookmark: !user.bookmark };\r\n                }\r\n                return user;\r\n            })\r\n        );\r\n    };\r\n\r\n    useEffect(() => {\r\n        api.professions.fetchAll().then((data) => setProfessions(data));\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        setCurrentPage(1);\r\n    }, [selectedProf]);\r\n\r\n    const handleProfessionSelect = (item) => {\r\n        setSelectedProf(item);\r\n    };\r\n\r\n    const handlePageChange = (pageIndex) => {\r\n        setCurrentPage(pageIndex);\r\n    };\r\n\r\n    const handleSort = (item) => {\r\n        setSortBy(item);\r\n    };\r\n    const { userId } = params;\r\n    if (!userId && users) {\r\n        const filteredUsers = selectedProf\r\n            ? users.filter(\r\n                  (user) =>\r\n                      JSON.stringify(user.profession) ===\r\n                      JSON.stringify(selectedProf)\r\n              )\r\n            : users;\r\n\r\n        const count = filteredUsers.length;\r\n        const sortedUsers = _.orderBy(\r\n            filteredUsers,\r\n            [sortBy.path],\r\n            [sortBy.order]\r\n        );\r\n        const usersCrop = paginate(sortedUsers, currentPage, pageSize);\r\n        const clearFilter = () => {\r\n            setSelectedProf();\r\n        };\r\n        return (\r\n            <div className=\"d-flex\">\r\n                {professions && (\r\n                    <div className=\"d-flex flex-column flex-shrink-0 p-3\">\r\n                        <GroupList\r\n                            items={professions}\r\n                            selectedItem={selectedProf}\r\n                            onItemSelect={handleProfessionSelect}\r\n                        />\r\n                        <button\r\n                            className=\"btn btn-secondary mt-2\"\r\n                            onClick={clearFilter}\r\n                        >\r\n                            Очистить\r\n                        </button>\r\n                    </div>\r\n                )}\r\n                <div className=\"d-flex flex-column\">\r\n                    <SearchStatus length={count} />\r\n                    {count > 0 && (\r\n                        <UsersTable\r\n                            users={usersCrop}\r\n                            onSort={handleSort}\r\n                            selectedSort={sortBy}\r\n                            onDelete={handleDelete}\r\n                            onToggleBookMark={handleToggleBookMark}\r\n                        />\r\n                    )}\r\n                    <div className=\"d-flex justify-content-center\">\r\n                        <Pagination\r\n                            itemsCount={count}\r\n                            pageSize={pageSize}\r\n                            currentPage={currentPage}\r\n                            onPageChange={handlePageChange}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    } else if (userId) {\r\n        return <UserPage userId={userId} />;\r\n    }\r\n    return \"Загрузка...\";\r\n};\r\nUsers.propTypes = {\r\n    users: PropTypes.oneOfType([PropTypes.object, PropTypes.array])\r\n};\r\n\r\nexport default Users;\r\n"]},"metadata":{},"sourceType":"module"}